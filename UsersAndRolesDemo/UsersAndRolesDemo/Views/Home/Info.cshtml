
@{
    ViewBag.Title = "Info";
    Layout = "~/Views/Shared/_LayoutPage1.cshtml";
}



<div class="panel panel-default">
    <div class="panel-body">
        <h2>Infomation</h2>
    </div>
</div>
<h3>WEB API Design</h3>
<p>Web API(Application programmer interfaces) was introduced by Microsoft in ASP.NET 4 to provide a simple and automatic delivery of RESTful content in either XML or JSON format.  Web API: </p>
<ul>
    <li>automatically generates JSON from your database content</li>
    <li>can reside in its own project or in the same web MVC project or web forms project</li>
</ul>
<p> REST data is transferred in either XML or JSON (Javascript Object Notation), in our case in form of JSON.</p><br />

<h4>Part 1: Setup</h4>
<p>First we will implement an API to our exciting controllers, with read/write actions using the Entity Framework.  We will also create binary references to the EDMX classes.  We also added id features to our API project. The Controller code needed to retrieve an object with a unique reference is already generated. In this case the URL needed to access this method is domain/api/property/id.  </p>

<h4>Part 2: Configuring the Global Class File</h4>
<p>Next in order to make our project work properly we configured the Global Class File. We added the following code to our Global.asax file:</p>
<p>using System.Web.Http;</p>
<p>Then, add this code to the start of the Application_Start() method in the Global.asax file</p>

<h4>Part 3: adding javascript</h4>
<p>We also created scripts folder, add an app.js file. When the web page has loaded, the JavaScript in this file calls the web api controller and appends objects.</p>
<p> To determine your port number run the project and get the port from the URL.</p>

<h4>Part 5: html</h4>
<p>To enable a property listing with the JavaScript that you just added, first create an empty Home controller. Inside body tag create script tag, inside script tag add. create  window.onload = function () and inside call sendRequest()</p>
<p>inside body tag create a span tag with  id='value1'. Also reference the JQuery inside the head tag</p>

<h4>Part 6: app.js - javascript</h4>
<div class="colorscripter-code" style="color:#010101; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#fafafa; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px; border-right:2px solid #e5e5e5"><div style="margin:0; padding:0; word-break:normal; text-align:right; color:#666; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="line-height:130%">1</div><div style="line-height:130%">2</div><div style="line-height:130%">3</div><div style="line-height:130%">4</div><div style="line-height:130%">5</div><div style="line-height:130%">6</div><div style="line-height:130%">7</div><div style="line-height:130%">8</div><div style="line-height:130%">9</div><div style="line-height:130%">10</div><div style="line-height:130%">11</div><div style="line-height:130%">12</div><div style="line-height:130%">13</div><div style="line-height:130%">14</div><div style="line-height:130%">15</div><div style="line-height:130%">16</div><div style="line-height:130%">17</div><div style="line-height:130%">18</div><div style="line-height:130%">19</div><div style="line-height:130%">20</div><div style="line-height:130%">21</div><div style="line-height:130%">22</div><div style="line-height:130%">23</div><div style="line-height:130%">24</div><div style="line-height:130%">25</div><div style="line-height:130%">26</div><div style="line-height:130%">27</div><div style="line-height:130%">28</div><div style="line-height:130%">29</div><div style="line-height:130%">30</div><div style="line-height:130%">31</div><div style="line-height:130%">32</div><div style="line-height:130%">33</div><div style="line-height:130%">34</div><div style="line-height:130%">35</div><div style="line-height:130%">36</div><div style="line-height:130%">37</div><div style="line-height:130%">38</div><div style="line-height:130%">39</div><div style="line-height:130%">40</div></div></td><td style="padding:6px 0"><div style="margin:0; padding:0; color:#010101; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#a71d5d">var</span>&nbsp;serviceUrl&nbsp;<span style="color:#0086b3"></span><span style="color:#a71d5d">=</span>&nbsp;<span style="color:#63a35c">'http://www.jcssd.me/seatoskycabins/api/Properties'</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#a71d5d">function</span>&nbsp;sendRequest()&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;$(<span style="color:#63a35c">"#properties"</span>).replaceWith(<span style="color:#63a35c">"&lt;span&nbsp;id='value1'&gt;&lt;/span&gt;"</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#a71d5d">var</span>&nbsp;method&nbsp;<span style="color:#0086b3"></span><span style="color:#a71d5d">=</span>&nbsp;$(<span style="color:#63a35c">'#method'</span>).val();</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;$.ajax({</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;method,</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;serviceUrl</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;}).done(<span style="color:#a71d5d">function</span>&nbsp;(data)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data.forEach(<span style="color:#a71d5d">function</span>&nbsp;(val)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;callback(val)</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;}).fail(<span style="color:#a71d5d">function</span>&nbsp;(jqXHR,&nbsp;textStatus,&nbsp;errorThrown)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$(<span style="color:#63a35c">'#value1'</span>).text(jqXHR.responseText&nbsp;<span style="color:#0086b3"></span><span style="color:#a71d5d">|</span><span style="color:#0086b3"></span><span style="color:#a71d5d">|</span>&nbsp;textStatus);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;});</div><div style="padding:0 6px; white-space:pre; line-height:130%">}</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#a71d5d">function</span>&nbsp;callback(val)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;$(<span style="color:#63a35c">"#value1"</span>).replaceWith(<span style="color:#63a35c">"&lt;dl&nbsp;&nbsp;id='properties'&nbsp;/&gt;"</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#a71d5d">var</span>&nbsp;str&nbsp;<span style="color:#0086b3"></span><span style="color:#a71d5d">=</span>&nbsp;val.title</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#a71d5d">var</span>&nbsp;strSummary&nbsp;<span style="color:#0086b3"></span><span style="color:#a71d5d">=</span>&nbsp;val.summary</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#a71d5d">var</span>&nbsp;strBedroom&nbsp;<span style="color:#0086b3"></span><span style="color:#a71d5d">=</span>&nbsp;<span style="color:#63a35c">"Nummer&nbsp;Bedrooms:&nbsp;"</span>&nbsp;<span style="color:#0086b3"></span><span style="color:#a71d5d">+</span>&nbsp;val.numBedrooms</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#a71d5d">var</span>&nbsp;strWashroom&nbsp;<span style="color:#0086b3"></span><span style="color:#a71d5d">=</span>&nbsp;<span style="color:#63a35c">"Nummer&nbsp;Washrooms:&nbsp;"</span>&nbsp;<span style="color:#0086b3"></span><span style="color:#a71d5d">+</span>&nbsp;val.numWashrooms</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#a71d5d">var</span>&nbsp;strKitchen&nbsp;<span style="color:#0086b3"></span><span style="color:#a71d5d">=</span>&nbsp;<span style="color:#63a35c">"Kitchen:&nbsp;"</span>&nbsp;<span style="color:#0086b3"></span><span style="color:#a71d5d">+</span>&nbsp;val.kitchen</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#a71d5d">var</span>&nbsp;strSmoking&nbsp;<span style="color:#0086b3"></span><span style="color:#a71d5d">=</span>&nbsp;<span style="color:#63a35c">"smokingAllowed"</span>&nbsp;<span style="color:#0086b3"></span><span style="color:#a71d5d">+</span>&nbsp;val.smokingAllowed</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#a71d5d">var</span>&nbsp;strMaxGuests&nbsp;<span style="color:#0086b3"></span><span style="color:#a71d5d">=</span>&nbsp;<span style="color:#63a35c">"max&nbsp;Number&nbsp;Guests"</span>&nbsp;<span style="color:#0086b3"></span><span style="color:#a71d5d">+</span>&nbsp;val.maxNumberGuests</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#a71d5d">var</span>&nbsp;strDimensions&nbsp;<span style="color:#0086b3"></span><span style="color:#a71d5d">=</span>&nbsp;<span style="color:#63a35c">"Dimensions:"</span>&nbsp;<span style="color:#0086b3"></span><span style="color:#a71d5d">+</span>&nbsp;val.dimensions</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;$(<span style="color:#63a35c">'&lt;dt/&gt;'</span>,&nbsp;{&nbsp;text:&nbsp;str&nbsp;}).appendTo($(<span style="color:#63a35c">'#properties'</span>));</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;$(<span style="color:#63a35c">'&lt;br/&gt;'</span>).appendTo($(<span style="color:#63a35c">'#properties'</span>));</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;$(<span style="color:#63a35c">'&lt;dd/&gt;'</span>,&nbsp;{&nbsp;text:&nbsp;strSummary&nbsp;}).appendTo($(<span style="color:#63a35c">'#properties'</span>));</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;$(<span style="color:#63a35c">'&lt;br/&gt;'</span>).appendTo($(<span style="color:#63a35c">'#properties'</span>));</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;$(<span style="color:#63a35c">'&lt;dd/&gt;'</span>,&nbsp;{&nbsp;text:&nbsp;strBedroom&nbsp;}).appendTo($(<span style="color:#63a35c">'#properties'</span>));</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;$(<span style="color:#63a35c">'&lt;dd/&gt;'</span>,&nbsp;{&nbsp;text:&nbsp;strWashroom&nbsp;}).appendTo($(<span style="color:#63a35c">'#properties'</span>));</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;$(<span style="color:#63a35c">'&lt;dd/&gt;'</span>,&nbsp;{&nbsp;text:&nbsp;strKitchen&nbsp;}).appendTo($(<span style="color:#63a35c">'#properties'</span>));</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;$(<span style="color:#63a35c">'&lt;dd/&gt;'</span>,&nbsp;{&nbsp;text:&nbsp;strSmoking&nbsp;}).appendTo($(<span style="color:#63a35c">'#properties'</span>));</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;$(<span style="color:#63a35c">'&lt;dd/&gt;'</span>,&nbsp;{&nbsp;text:&nbsp;strMaxGuests&nbsp;}).appendTo($(<span style="color:#63a35c">'#properties'</span>));</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;$(<span style="color:#63a35c">'&lt;dd/&gt;'</span>,&nbsp;{&nbsp;text:&nbsp;strDimensions&nbsp;}).appendTo($(<span style="color:#63a35c">'#properties'</span>));</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;$(<span style="color:#63a35c">'&lt;br/&gt;'</span>).appendTo($(<span style="color:#63a35c">'#properties'</span>));</div><div style="padding:0 6px; white-space:pre; line-height:130%">}</div></div><div style="text-align:right; margin-top:-13px; margin-right:5px; font-size:9px; font-style:italic"><a href="http://colorscripter.com/info#e" target="_blank" style="color:#e5e5e5; text-decoration:none">Colored by Color Scripter</a></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"><a href="http://colorscripter.com/info#e" target="_blank" style="text-decoration:none; color:white"><span style="font-size:9px; word-break:normal; background-color:#e5e5e5; color:white; border-radius:10px; padding:1px">cs</span></a></td></tr></table></div>

<h4>Part 7: Results</h4>
<div class="jumbotron">
    <div id="properties"></div>
</div>
<script src="~/Scripts/app.js"></script>
<script>
    window.onload = function () {
        sendRequest();
    }
</script>